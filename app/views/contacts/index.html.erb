<script src="https://unpkg.com/sticky-table-headers"></script>

<input type="text" class="form-control form-control-lg" id="myInput" onkeyup="myFunction()" aria-label="Large" aria-describedby="inputGroup-sizing-sm" placeholder="Search for names.." style="margin-bottom: 10px">

<table class="table table-striped" id="family-table">
  <thead class="thead-dark">
    <tr>
      <th scope="col">Name</th>
      <th scope="col">Email</th>
      <th scope="col">Phone</th>
      <th scope="col">Address</th>
      <th scope="col"></th>
    </tr>
  </thead>
  <tbody>
    <% @contacts.each do |contact| %>
      <tr>
        <td><%= contact.first_name  %> <%= contact.last_name %></td>
        <td><%= contact.email %></td>
        <td><%= contact.phone %></td>
        <td><%= contact.full_address %></td>
        <td><%= link_to 'Edit', edit_contact_path(contact.id), class: 'btn btn-info' %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<script>
  $(function(){
    $('table').stickyTableHeaders();
  })

  function myFunction() {
    // Declare variables
    var input, filter, table, tr, td, i;
    input = document.getElementById("myInput");
    filter = input.value.toUpperCase();
    table = document.getElementById("family-table");
    tr = table.getElementsByTagName("tr");

    // Loop through all table rows, and hide those who don't match the search query
    for (i = 0; i < tr.length; i++) {
      td = tr[i].getElementsByTagName("td")[0];
      if (td) {
        if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
          tr[i].style.display = "";
        } else {
          tr[i].style.display = "none";
        }
      }
    }
  }
</script>
